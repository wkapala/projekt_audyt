#!/bin/bash
# =============================================================================
# Plik konfiguracyjny dla System Audit
# =============================================================================

# Automatyczne wykrywanie lokalizacji projektu
# Działa zarówno gdy sourced z innego skryptu, jak i gdy uruchomiony bezpośrednio
if [[ -n "${BASH_SOURCE[0]}" ]]; then
    INSTALL_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
else
    INSTALL_DIR="$(pwd)"
fi

# Struktura katalogów
MODULE_DIR="${INSTALL_DIR}/modules"
LOG_DIR="${INSTALL_DIR}/logs"
REPORT_DIR="${INSTALL_DIR}/reports"

# Pliki
LOGFILE="${LOG_DIR}/audyt.log"
LIB_FILE="${INSTALL_DIR}/audyt_lib.sh"

# =============================================================================
# Konfiguracja sieci
# =============================================================================

# Konfiguracja centralnego hosta (wysyłanie raportów)
# Connectivity test automatycznie wykrywa:
#  - Admin: pokazuje klientów z ARP cache (którzy wysłali raporty)
#  - Klient: testuje połączenie do CENTRAL_HOST
CENTRAL_HOST="192.168.64.3"
CENTRAL_USER="audit"
CENTRAL_DIR="/opt/sysaudit/central_reports"

# Timeout dla operacji sieciowych (w sekundach)
SSH_TIMEOUT=10
PING_TIMEOUT=1
PING_COUNT=1

# Liczba prób wysłania raportu
SCP_RETRY_COUNT=3
SCP_RETRY_DELAY=5

# =============================================================================
# Progi alarmowe
# =============================================================================

# Pamięć RAM - próg ostrzeżenia (%)
MEM_WARNING_THRESHOLD=90

# Dysk - próg ostrzeżenia (%)
DISK_WARNING_THRESHOLD=90

# =============================================================================
# Kolory (dla terminala)
# =============================================================================

RED="\e[31m"
GREEN="\e[32m"
YELLOW="\e[33m"
CYAN="\e[36m"
BOLD="\e[1m"
RESET="\e[0m"

# Sprawdzenie czy terminal wspiera kolory
if [[ ! -t 1 ]]; then
    # Output nie jest terminalem (np. przekierowanie do pliku)
    RED=""
    GREEN=""
    YELLOW=""
    CYAN=""
    BOLD=""
    RESET=""
fi
