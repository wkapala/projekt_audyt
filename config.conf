#!/bin/bash
# =============================================================================
# Plik konfiguracyjny dla System Audit
# =============================================================================

# Automatyczne wykrywanie lokalizacji projektu
# Działa zarówno gdy sourced z innego skryptu, jak i gdy uruchomiony bezpośrednio
if [[ -n "${BASH_SOURCE[0]}" ]]; then
    INSTALL_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
else
    INSTALL_DIR="$(pwd)"
fi

# Struktura katalogów
MODULE_DIR="${INSTALL_DIR}/modules"
LOG_DIR="${INSTALL_DIR}/logs"
REPORT_DIR="${INSTALL_DIR}/reports"

# Pliki
LOGFILE="${LOG_DIR}/audyt.log"
LIB_FILE="${INSTALL_DIR}/audyt_lib.sh"

# =============================================================================
# Konfiguracja sieci
# =============================================================================

# Włącz/wyłącz test łączności (connectivity test w module Network)
# Ustaw na 'false' jeśli nie masz innych hostów do testowania
ENABLE_CONNECTIVITY_TEST=true

# Hosty do testowania łączności (moduł sieciowy)
# ⚠️  UWAGA: To są przykładowe adresy IP! Musisz je zmienić na swoje!
# Jeśli nie chcesz testować łączności, ustaw ENABLE_CONNECTIVITY_TEST=false
# Przykład: PING_TARGETS=("10.0.0.10" "10.0.0.11" "10.0.0.12")
PING_TARGETS=("192.168.64.3" "192.168.64.4" "192.168.64.5")

# Konfiguracja centralnego hosta (wysyłanie raportów)
# ⚠️  UWAGA: Zmień na adres IP swojego centralnego hosta!
# Jeśli nie używasz funkcji wysyłania raportów, możesz zostawić domyślne wartości
CENTRAL_HOST="192.168.64.3"
CENTRAL_USER="audit"
CENTRAL_DIR="/opt/sysaudit/central_reports"

# Timeout dla operacji sieciowych (w sekundach)
SSH_TIMEOUT=10
PING_TIMEOUT=1
PING_COUNT=1

# Liczba prób wysłania raportu
SCP_RETRY_COUNT=3
SCP_RETRY_DELAY=5

# =============================================================================
# Progi alarmowe
# =============================================================================

# Pamięć RAM - próg ostrzeżenia (%)
MEM_WARNING_THRESHOLD=90

# Dysk - próg ostrzeżenia (%)
DISK_WARNING_THRESHOLD=90

# =============================================================================
# Kolory (dla terminala)
# =============================================================================

RED="\e[31m"
GREEN="\e[32m"
YELLOW="\e[33m"
CYAN="\e[36m"
BOLD="\e[1m"
RESET="\e[0m"

# Sprawdzenie czy terminal wspiera kolory
if [[ ! -t 1 ]]; then
    # Output nie jest terminalem (np. przekierowanie do pliku)
    RED=""
    GREEN=""
    YELLOW=""
    CYAN=""
    BOLD=""
    RESET=""
fi
